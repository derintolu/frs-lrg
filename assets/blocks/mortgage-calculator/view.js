(()=>{"use strict";const e=window.wp.element,a=window.wp.i18n;function r(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function t(e){return`${e.toFixed(3)}%`}const n=window.ReactJSXRuntime;function s({label:a,value:r,onChange:t,type:s="number",prefix:l="",suffix:o="",min:i=0,step:p="any"}){const[d,x]=e.useState(!1),u=""!==r&&0!==r;return(0,n.jsx)("div",{className:"mb-4 relative",children:(0,n.jsxs)("div",{className:"flex items-center gap-2 bg-gray-200 rounded-lg border px-3 py-3 transition-all duration-200",style:{borderColor:d||u?"transparent":"#d1d5db",borderWidth:"2px",borderImage:d||u?"linear-gradient(135deg, #2563eb 0%, #2dd4da 100%) 1":"none"},children:[l&&(0,n.jsx)("span",{className:"text-gray-500 text-sm",children:l}),o&&(0,n.jsx)("span",{className:"text-gray-500 text-sm",children:o}),(0,n.jsx)("input",{type:s,value:r,onChange:e=>t(parseFloat(e.target.value)||0),onFocus:()=>x(!0),onBlur:()=>x(!1),min:i,step:p,placeholder:a,className:"w-full bg-transparent border-none text-sm outline-none placeholder:opacity-0"}),(0,n.jsx)("label",{className:"absolute left-3 bg-gray-200 px-1 text-sm pointer-events-none transition-all duration-200 origin-left",style:{top:d||u?"-0.5rem":"0.75rem",transform:d||u?"scale(0.75)":"scale(1)",background:d||u?"linear-gradient(135deg, #2563eb 0%, #2dd4da 100%)":"#e5e7eb",WebkitBackgroundClip:d||u?"text":"border-box",WebkitTextFillColor:d||u?"transparent":"#374151",backgroundClip:d||u?"text":"border-box"},children:a})]})})}function l({results:e,primaryColor:s,secondaryColor:l,type:i}){const p=`linear-gradient(135deg, ${s} 0%, ${l} 100%)`;return(0,n.jsxs)("div",{style:{background:p,borderRadius:"8px",padding:"24px",color:"#ffffff",height:"fit-content"},children:[(0,n.jsx)("h3",{style:{margin:"0 0 20px",fontSize:"18px",fontWeight:"600"},children:(0,a.__)("Results","frs-partnership-portal")}),"conventional"===i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o,{label:(0,a.__)("Monthly Payment","frs-partnership-portal"),value:r(e.monthlyPayment),large:!0}),(0,n.jsx)(o,{label:(0,a.__)("Principal & Interest","frs-partnership-portal"),value:r(e.principalAndInterest)}),e.pmi>0&&(0,n.jsx)(o,{label:(0,a.__)("PMI","frs-partnership-portal"),value:r(e.pmi)}),(0,n.jsx)(o,{label:(0,a.__)("Property Tax","frs-partnership-portal"),value:r(e.propertyTax)}),(0,n.jsx)(o,{label:(0,a.__)("Insurance","frs-partnership-portal"),value:r(e.insurance)}),e.hoa>0&&(0,n.jsx)(o,{label:(0,a.__)("HOA","frs-partnership-portal"),value:r(e.hoa)}),(0,n.jsxs)("div",{style:{borderTop:"1px solid rgba(255,255,255,0.3)",margin:"16px 0",paddingTop:"16px"},children:[(0,n.jsx)(o,{label:(0,a.__)("Loan Amount","frs-partnership-portal"),value:r(e.loanAmount)}),(0,n.jsx)(o,{label:(0,a.__)("Down Payment","frs-partnership-portal"),value:t(e.downPaymentPercent)}),(0,n.jsx)(o,{label:(0,a.__)("Total Interest","frs-partnership-portal"),value:r(e.totalInterest)})]})]}),"va"===i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o,{label:(0,a.__)("Monthly Payment","frs-partnership-portal"),value:r(e.monthlyPayment),large:!0}),(0,n.jsx)(o,{label:(0,a.__)("Principal & Interest","frs-partnership-portal"),value:r(e.principalAndInterest)}),(0,n.jsx)(o,{label:(0,a.__)("Property Tax","frs-partnership-portal"),value:r(e.propertyTax)}),(0,n.jsx)(o,{label:(0,a.__)("Insurance","frs-partnership-portal"),value:r(e.insurance)}),e.hoa>0&&(0,n.jsx)(o,{label:(0,a.__)("HOA","frs-partnership-portal"),value:r(e.hoa)}),(0,n.jsxs)("div",{style:{borderTop:"1px solid rgba(255,255,255,0.3)",margin:"16px 0",paddingTop:"16px"},children:[(0,n.jsx)(o,{label:(0,a.__)("Loan Amount","frs-partnership-portal"),value:r(e.loanAmount)}),(0,n.jsx)(o,{label:(0,a.__)("Funding Fee","frs-partnership-portal"),value:r(e.fundingFee)}),(0,n.jsx)(o,{label:(0,a.__)("Total Interest","frs-partnership-portal"),value:r(e.totalInterest)})]})]}),"fha"===i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o,{label:(0,a.__)("Monthly Payment","frs-partnership-portal"),value:r(e.monthlyPayment),large:!0}),(0,n.jsx)(o,{label:(0,a.__)("Principal & Interest","frs-partnership-portal"),value:r(e.principalAndInterest)}),(0,n.jsx)(o,{label:(0,a.__)("Monthly MIP","frs-partnership-portal"),value:r(e.monthlyMIP)}),(0,n.jsx)(o,{label:(0,a.__)("Property Tax","frs-partnership-portal"),value:r(e.propertyTax)}),(0,n.jsx)(o,{label:(0,a.__)("Insurance","frs-partnership-portal"),value:r(e.insurance)}),e.hoa>0&&(0,n.jsx)(o,{label:(0,a.__)("HOA","frs-partnership-portal"),value:r(e.hoa)}),(0,n.jsxs)("div",{style:{borderTop:"1px solid rgba(255,255,255,0.3)",margin:"16px 0",paddingTop:"16px"},children:[(0,n.jsx)(o,{label:(0,a.__)("Loan Amount","frs-partnership-portal"),value:r(e.loanAmount)}),(0,n.jsx)(o,{label:(0,a.__)("Upfront MIP","frs-partnership-portal"),value:r(e.upfrontMIP)}),(0,n.jsx)(o,{label:(0,a.__)("Total Interest","frs-partnership-portal"),value:r(e.totalInterest)})]})]}),"refinance"===i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o,{label:(0,a.__)("New Monthly Payment","frs-partnership-portal"),value:r(e.newMonthlyPayment),large:!0}),(0,n.jsx)(o,{label:(0,a.__)("Monthly Savings","frs-partnership-portal"),value:r(Math.abs(e.monthlySavings)),positive:e.monthlySavings>0}),(0,n.jsx)(o,{label:(0,a.__)("Break-Even","frs-partnership-portal"),value:`${e.breakEvenMonths} months`}),(0,n.jsxs)("div",{style:{borderTop:"1px solid rgba(255,255,255,0.3)",margin:"16px 0",paddingTop:"16px"},children:[(0,n.jsx)(o,{label:(0,a.__)("New Loan Amount","frs-partnership-portal"),value:r(e.newLoanAmount)}),(0,n.jsx)(o,{label:(0,a.__)("LTV Ratio","frs-partnership-portal"),value:t(e.ltvRatio)}),(0,n.jsx)(o,{label:(0,a.__)("Lifetime Savings","frs-partnership-portal"),value:r(Math.abs(e.lifetimeSavings)),positive:e.lifetimeSavings>0})]})]}),"affordability"===i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o,{label:(0,a.__)("Max Home Price","frs-partnership-portal"),value:r(e.maxHomePrice),large:!0}),(0,n.jsx)(o,{label:(0,a.__)("Max Loan Amount","frs-partnership-portal"),value:r(e.maxLoanAmount)}),(0,n.jsx)(o,{label:(0,a.__)("Est. Monthly Payment","frs-partnership-portal"),value:r(e.estimatedMonthlyPayment)}),(0,n.jsxs)("div",{style:{borderTop:"1px solid rgba(255,255,255,0.3)",margin:"16px 0",paddingTop:"16px"},children:[(0,n.jsx)(o,{label:(0,a.__)("Down Payment","frs-partnership-portal"),value:r(e.downPayment)}),e.estimatedPMI>0&&(0,n.jsx)(o,{label:(0,a.__)("Est. PMI","frs-partnership-portal"),value:r(e.estimatedPMI)}),(0,n.jsx)(o,{label:(0,a.__)("Front-End Ratio","frs-partnership-portal"),value:t(e.frontEndRatio)}),(0,n.jsx)(o,{label:(0,a.__)("Back-End Ratio","frs-partnership-portal"),value:t(e.backEndRatio)})]})]})]})}function o({label:e,value:a,large:r=!1,positive:t=null}){const s=null===t?"#ffffff":t?"#10b981":"#ef4444";return(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:r?"16px":"8px",paddingBottom:r?"12px":"0",borderBottom:r?"1px solid rgba(255,255,255,0.3)":"none"},children:[(0,n.jsx)("span",{style:{fontSize:r?"14px":"13px",opacity:.9},children:e}),(0,n.jsx)("span",{style:{fontSize:r?"24px":"14px",fontWeight:r?"700":"600",color:s},children:a})]})}function i({attributes:r}){const{showPropertyTax:t,showInsurance:o,showHOA:i,showPMI:p,primaryColor:d,secondaryColor:x}=r,[u,f]=(0,e.useState)(3e5),[c,h]=(0,e.useState)(6e4),[m,g]=(0,e.useState)(6.5),[y,b]=(0,e.useState)(30),[_,j]=(0,e.useState)(3600),[v,C]=(0,e.useState)(1200),[S,T]=(0,e.useState)(0),[w,P]=(0,e.useState)(null);return(0,e.useEffect)(()=>{const e=function(e){const{homePrice:a,downPayment:r,interestRate:t,loanTerm:n,propertyTax:s=0,insurance:l=0,hoa:o=0}=e,i=a-r,p=r/a*100,d=t/100/12,x=12*n;let u;u=0===d?i/x:i*d*Math.pow(1+d,x)/(Math.pow(1+d,x)-1);const f=p<20?.005*i/12:0,c=s/12,h=l/12,m=o/12,g=u+f+c+h+m;return{monthlyPayment:g,principalAndInterest:u,pmi:f,propertyTax:c,insurance:h,hoa:m,loanAmount:i,downPaymentPercent:p,totalInterest:u*x-i,totalPaid:g*x}}({homePrice:u,downPayment:c,interestRate:m,loanTerm:y,propertyTax:t?_:0,insurance:o?v:0,hoa:i?S:0});P(e)},[u,c,m,y,_,v,S,t,o,i]),(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"24px"},children:(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"24px"},children:[(0,n.jsxs)("div",{style:{background:"#ffffff",borderRadius:"8px",padding:"24px",border:"1px solid #e5e7eb",gridColumn:"span 2"},children:[(0,n.jsx)("h3",{style:{margin:"0 0 20px",fontSize:"18px",fontWeight:"600",color:"#111827"},children:(0,a.__)("Loan Details","frs-partnership-portal")}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[(0,n.jsx)(s,{label:(0,a.__)("Home Price","frs-partnership-portal"),value:u,onChange:f,prefix:"$"}),(0,n.jsx)(s,{label:(0,a.__)("Down Payment","frs-partnership-portal"),value:c,onChange:h,prefix:"$"}),(0,n.jsx)(s,{label:(0,a.__)("Interest Rate","frs-partnership-portal"),value:m,onChange:g,suffix:"%",step:"0.001"}),(0,n.jsx)(s,{label:(0,a.__)("Loan Term (years)","frs-partnership-portal"),value:y,onChange:b})]}),(t||o||i)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h4",{style:{margin:"24px 0 16px",fontSize:"16px",fontWeight:"600",color:"#111827"},children:(0,a.__)("Additional Costs (Annual)","frs-partnership-portal")}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[t&&(0,n.jsx)(s,{label:(0,a.__)("Property Tax","frs-partnership-portal"),value:_,onChange:j,prefix:"$"}),o&&(0,n.jsx)(s,{label:(0,a.__)("Home Insurance","frs-partnership-portal"),value:v,onChange:C,prefix:"$"}),i&&(0,n.jsx)(s,{label:(0,a.__)("HOA Fees","frs-partnership-portal"),value:S,onChange:T,prefix:"$"})]})]})]}),w&&(0,n.jsx)(l,{results:w,primaryColor:d,secondaryColor:x,type:"conventional"})]})})}function p({attributes:r}){const{showPropertyTax:t,showInsurance:o,showHOA:i,primaryColor:p,secondaryColor:d}=r,[x,u]=(0,e.useState)(3e5),[f,c]=(0,e.useState)(0),[h,m]=(0,e.useState)(6.25),[g,y]=(0,e.useState)(30),[b,_]=(0,e.useState)(2.3),[j,v]=(0,e.useState)(3600),[C,S]=(0,e.useState)(1200),[T,w]=(0,e.useState)(0),[P,I]=(0,e.useState)(null);return(0,e.useEffect)(()=>{const e=function(e){const{homePrice:a,downPayment:r=0,interestRate:t,loanTerm:n,propertyTax:s=0,insurance:l=0,hoa:o=0,fundingFeePercent:i=2.3}=e,p=a*(i/100),d=a-r+p,x=t/100/12,u=12*n;let f;f=0===x?d/u:d*x*Math.pow(1+x,u)/(Math.pow(1+x,u)-1);const c=s/12,h=l/12,m=o/12,g=f+c+h+m;return{monthlyPayment:g,principalAndInterest:f,fundingFee:p,propertyTax:c,insurance:h,hoa:m,loanAmount:d,totalInterest:f*u-d,totalPaid:g*u}}({homePrice:x,downPayment:f,interestRate:h,loanTerm:g,fundingFeePercent:b,propertyTax:t?j:0,insurance:o?C:0,hoa:i?T:0});I(e)},[x,f,h,g,b,j,C,T,t,o,i]),(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"24px"},children:(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"24px"},children:[(0,n.jsxs)("div",{style:{background:"#ffffff",borderRadius:"8px",padding:"24px",border:"1px solid #e5e7eb",gridColumn:"span 2"},children:[(0,n.jsx)("h3",{style:{margin:"0 0 20px",fontSize:"18px",fontWeight:"600",color:"#111827"},children:(0,a.__)("VA Loan Details","frs-partnership-portal")}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[(0,n.jsx)(s,{label:(0,a.__)("Home Price","frs-partnership-portal"),value:x,onChange:u,prefix:"$"}),(0,n.jsx)(s,{label:(0,a.__)("Down Payment","frs-partnership-portal"),value:f,onChange:c,prefix:"$"}),(0,n.jsx)(s,{label:(0,a.__)("Interest Rate","frs-partnership-portal"),value:h,onChange:m,suffix:"%",step:"0.001"}),(0,n.jsx)(s,{label:(0,a.__)("Loan Term (years)","frs-partnership-portal"),value:g,onChange:y}),(0,n.jsx)(s,{label:(0,a.__)("Funding Fee %","frs-partnership-portal"),value:b,onChange:_,suffix:"%",step:"0.1"})]}),(t||o||i)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h4",{style:{margin:"24px 0 16px",fontSize:"16px",fontWeight:"600",color:"#111827"},children:(0,a.__)("Additional Costs (Annual)","frs-partnership-portal")}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[t&&(0,n.jsx)(s,{label:(0,a.__)("Property Tax","frs-partnership-portal"),value:j,onChange:v,prefix:"$"}),o&&(0,n.jsx)(s,{label:(0,a.__)("Home Insurance","frs-partnership-portal"),value:C,onChange:S,prefix:"$"}),i&&(0,n.jsx)(s,{label:(0,a.__)("HOA Fees","frs-partnership-portal"),value:T,onChange:w,prefix:"$"})]})]})]}),P&&(0,n.jsx)(l,{results:P,primaryColor:p,secondaryColor:d,type:"va"})]})})}function d({attributes:r}){const{showPropertyTax:t,showInsurance:o,showHOA:i,primaryColor:p,secondaryColor:d}=r,[x,u]=(0,e.useState)(3e5),[f,c]=(0,e.useState)(10500),[h,m]=(0,e.useState)(6.5),[g,y]=(0,e.useState)(30),[b,_]=(0,e.useState)(3600),[j,v]=(0,e.useState)(1200),[C,S]=(0,e.useState)(0),[T,w]=(0,e.useState)(null);return(0,e.useEffect)(()=>{const e=function(e){const{homePrice:a,downPayment:r,interestRate:t,loanTerm:n,propertyTax:s=0,insurance:l=0,hoa:o=0}=e,i=.0175*a,p=a-r,d=p+i,x=t/100/12,u=12*n;let f;f=0===x?d/u:d*x*Math.pow(1+x,u)/(Math.pow(1+x,u)-1);const c=.0085*p/12,h=s/12,m=l/12,g=o/12,y=f+c+h+m+g;return{monthlyPayment:y,principalAndInterest:f,upfrontMIP:i,monthlyMIP:c,propertyTax:h,insurance:m,hoa:g,loanAmount:d,totalInterest:f*u-d,totalPaid:y*u}}({homePrice:x,downPayment:f,interestRate:h,loanTerm:g,propertyTax:t?b:0,insurance:o?j:0,hoa:i?C:0});w(e)},[x,f,h,g,b,j,C,t,o,i]),(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"24px"},children:(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"24px"},children:[(0,n.jsxs)("div",{style:{background:"#ffffff",borderRadius:"8px",padding:"24px",border:"1px solid #e5e7eb",gridColumn:"span 2"},children:[(0,n.jsx)("h3",{style:{margin:"0 0 20px",fontSize:"18px",fontWeight:"600",color:"#111827"},children:(0,a.__)("FHA Loan Details","frs-partnership-portal")}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[(0,n.jsx)(s,{label:(0,a.__)("Home Price","frs-partnership-portal"),value:x,onChange:u,prefix:"$"}),(0,n.jsx)(s,{label:(0,a.__)("Down Payment","frs-partnership-portal"),value:f,onChange:c,prefix:"$"}),(0,n.jsx)(s,{label:(0,a.__)("Interest Rate","frs-partnership-portal"),value:h,onChange:m,suffix:"%",step:"0.001"}),(0,n.jsx)(s,{label:(0,a.__)("Loan Term (years)","frs-partnership-portal"),value:g,onChange:y})]}),(t||o||i)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h4",{style:{margin:"24px 0 16px",fontSize:"16px",fontWeight:"600",color:"#111827"},children:(0,a.__)("Additional Costs (Annual)","frs-partnership-portal")}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[t&&(0,n.jsx)(s,{label:(0,a.__)("Property Tax","frs-partnership-portal"),value:b,onChange:_,prefix:"$"}),o&&(0,n.jsx)(s,{label:(0,a.__)("Home Insurance","frs-partnership-portal"),value:j,onChange:v,prefix:"$"}),i&&(0,n.jsx)(s,{label:(0,a.__)("HOA Fees","frs-partnership-portal"),value:C,onChange:S,prefix:"$"})]})]})]}),T&&(0,n.jsx)(l,{results:T,primaryColor:p,secondaryColor:d,type:"fha"})]})})}function x({attributes:r}){const{primaryColor:t,secondaryColor:o}=r,[i,p]=(0,e.useState)(25e4),[d,x]=(0,e.useState)(3e5),[u,f]=(0,e.useState)(7.5),[c,h]=(0,e.useState)(1748),[m,g]=(0,e.useState)(6.25),[y,b]=(0,e.useState)(30),[_,j]=(0,e.useState)(5e3),[v,C]=(0,e.useState)(null);return(0,e.useEffect)(()=>{const e=function(e){const{currentLoanBalance:a,homeValue:r,newInterestRate:t,newLoanTerm:n,closingCosts:s=0,currentInterestRate:l,currentPayment:o}=e,i=a+s,p=t/100/12,d=12*n;let x;x=0===p?i/d:i*p*Math.pow(1+p,d)/(Math.pow(1+p,d)-1);const u=o-x,f=x*d;return{newMonthlyPayment:x,monthlySavings:u,breakEvenMonths:s>0?Math.ceil(s/Math.abs(u)):0,lifetimeSavings:o*d-f,totalNewLoanCost:f,ltvRatio:a/r*100,newLoanAmount:i,totalInterest:f-i}}({currentLoanBalance:i,homeValue:d,currentInterestRate:u,currentPayment:c,newInterestRate:m,newLoanTerm:y,closingCosts:_});C(e)},[i,d,u,c,m,y,_]),(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"24px"},children:(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"24px"},children:[(0,n.jsxs)("div",{style:{background:"#ffffff",borderRadius:"8px",padding:"24px",border:"1px solid #e5e7eb",gridColumn:"span 2"},children:[(0,n.jsx)("h3",{style:{margin:"0 0 20px",fontSize:"18px",fontWeight:"600",color:"#111827"},children:(0,a.__)("Current Loan","frs-partnership-portal")}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[(0,n.jsx)(s,{label:(0,a.__)("Current Loan Balance","frs-partnership-portal"),value:i,onChange:p,prefix:"$"}),(0,n.jsx)(s,{label:(0,a.__)("Home Value","frs-partnership-portal"),value:d,onChange:x,prefix:"$"}),(0,n.jsx)(s,{label:(0,a.__)("Current Interest Rate","frs-partnership-portal"),value:u,onChange:f,suffix:"%",step:"0.001"}),(0,n.jsx)(s,{label:(0,a.__)("Current Monthly Payment","frs-partnership-portal"),value:c,onChange:h,prefix:"$"})]}),(0,n.jsx)("h3",{style:{margin:"24px 0 16px",fontSize:"18px",fontWeight:"600",color:"#111827"},children:(0,a.__)("New Loan","frs-partnership-portal")}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[(0,n.jsx)(s,{label:(0,a.__)("New Interest Rate","frs-partnership-portal"),value:m,onChange:g,suffix:"%",step:"0.001"}),(0,n.jsx)(s,{label:(0,a.__)("New Loan Term (years)","frs-partnership-portal"),value:y,onChange:b}),(0,n.jsx)(s,{label:(0,a.__)("Closing Costs","frs-partnership-portal"),value:_,onChange:j,prefix:"$"})]})]}),v&&(0,n.jsx)(l,{results:v,primaryColor:t,secondaryColor:o,type:"refinance"})]})})}function u({attributes:r}){const{showPropertyTax:t,showInsurance:o,showHOA:i,primaryColor:p,secondaryColor:d}=r,[x,u]=(0,e.useState)(75e3),[f,c]=(0,e.useState)(500),[h,m]=(0,e.useState)(3e4),[g,y]=(0,e.useState)(6.5),[b,_]=(0,e.useState)(30),[j,v]=(0,e.useState)(2400),[C,S]=(0,e.useState)(1200),[T,w]=(0,e.useState)(0),[P,I]=(0,e.useState)(null);return(0,e.useEffect)(()=>{const e=function(e){const{annualIncome:a,monthlyDebts:r,downPayment:t,interestRate:n,loanTerm:s,propertyTax:l=2400,insurance:o=1200,hoa:i=0}=e,p=a/12,d=.28*p,x=.36*p,u=l/12,f=o/12,c=i/12,h=Math.min(d,x-r)-u-f-c,m=n/100/12,g=12*s;let y;y=0===m?h*g:h*(Math.pow(1+m,g)-1)/(m*Math.pow(1+m,g));const b=y+t,_=t/b*100<20?.005*y/12:0,j=h+_+u+f+c;return{maxHomePrice:b,maxLoanAmount:y,estimatedMonthlyPayment:j,downPayment:t,monthlyTaxes:u,monthlyInsurance:f,monthlyHOA:c,estimatedPMI:_,frontEndRatio:j/p*100,backEndRatio:(j+r)/p*100}}({annualIncome:x,monthlyDebts:f,downPayment:h,interestRate:g,loanTerm:b,propertyTax:t?j:2400,insurance:o?C:1200,hoa:i?T:0});I(e)},[x,f,h,g,b,j,C,T,t,o,i]),(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"24px"},children:(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"24px"},children:[(0,n.jsxs)("div",{style:{background:"#ffffff",borderRadius:"8px",padding:"24px",border:"1px solid #e5e7eb",gridColumn:"span 2"},children:[(0,n.jsx)("h3",{style:{margin:"0 0 20px",fontSize:"18px",fontWeight:"600",color:"#111827"},children:(0,a.__)("Income & Debts","frs-partnership-portal")}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[(0,n.jsx)(s,{label:(0,a.__)("Annual Income","frs-partnership-portal"),value:x,onChange:u,prefix:"$"}),(0,n.jsx)(s,{label:(0,a.__)("Monthly Debts","frs-partnership-portal"),value:f,onChange:c,prefix:"$"}),(0,n.jsx)(s,{label:(0,a.__)("Down Payment","frs-partnership-portal"),value:h,onChange:m,prefix:"$"})]}),(0,n.jsx)("h4",{style:{margin:"24px 0 16px",fontSize:"16px",fontWeight:"600",color:"#111827"},children:(0,a.__)("Loan Terms","frs-partnership-portal")}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[(0,n.jsx)(s,{label:(0,a.__)("Interest Rate","frs-partnership-portal"),value:g,onChange:y,suffix:"%",step:"0.001"}),(0,n.jsx)(s,{label:(0,a.__)("Loan Term (years)","frs-partnership-portal"),value:b,onChange:_})]}),(t||o||i)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h4",{style:{margin:"24px 0 16px",fontSize:"16px",fontWeight:"600",color:"#111827"},children:(0,a.__)("Estimated Costs (Annual)","frs-partnership-portal")}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[t&&(0,n.jsx)(s,{label:(0,a.__)("Property Tax","frs-partnership-portal"),value:j,onChange:v,prefix:"$"}),o&&(0,n.jsx)(s,{label:(0,a.__)("Home Insurance","frs-partnership-portal"),value:C,onChange:S,prefix:"$"}),i&&(0,n.jsx)(s,{label:(0,a.__)("HOA Fees","frs-partnership-portal"),value:T,onChange:w,prefix:"$"})]})]})]}),P&&(0,n.jsx)(l,{results:P,primaryColor:p,secondaryColor:d,type:"affordability"})]})})}function f({isOpen:r,onClose:t,attributes:s,calculationType:l,calculationResults:o}){const{leadCaptureTitle:i,leadCaptureDescription:p,ctaButtonText:d,primaryColor:x,secondaryColor:u}=s,[f,c]=(0,e.useState)({firstName:"",lastName:"",email:"",phone:""}),[h,m]=(0,e.useState)(!1),[g,y]=(0,e.useState)(!1),[b,_]=(0,e.useState)("");if(!r)return null;const j=`linear-gradient(135deg, ${x} 0%, ${u} 100%)`;return(0,n.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},onClick:t,children:(0,n.jsxs)("div",{style:{background:"#ffffff",borderRadius:"12px",maxWidth:"500px",width:"100%",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",overflow:"hidden"},onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{style:{background:j,padding:"24px",color:"#ffffff"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"8px"},children:[(0,n.jsx)("h3",{style:{margin:0,fontSize:"24px",fontWeight:"bold"},children:i}),(0,n.jsx)("button",{onClick:t,style:{background:"transparent",border:"none",color:"#ffffff",fontSize:"24px",cursor:"pointer",padding:"0",lineHeight:"1"},children:"×"})]}),(0,n.jsx)("p",{style:{margin:0,opacity:.9,fontSize:"14px"},children:p})]}),(0,n.jsx)("div",{style:{padding:"24px"},children:g?(0,n.jsxs)("div",{style:{textAlign:"center",padding:"40px 20px"},children:[(0,n.jsx)("div",{style:{width:"64px",height:"64px",background:"#10b981",borderRadius:"50%",margin:"0 auto 16px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"32px",color:"#ffffff"},children:"✓"}),(0,n.jsx)("h4",{style:{margin:"0 0 8px",fontSize:"20px",fontWeight:"600",color:"#111827"},children:(0,a.__)("Thank You!","frs-partnership-portal")}),(0,n.jsx)("p",{style:{margin:0,color:"#6b7280",fontSize:"14px"},children:(0,a.__)("We'll be in touch soon.","frs-partnership-portal")})]}):(0,n.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),m(!0),_("");try{const e=window.frsCalculatorConfig?.loanOfficerId||0;if(!(await fetch("/wp-json/lrh/v1/calculator-leads",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.frsCalculatorConfig?.restNonce||""},body:JSON.stringify({first_name:f.firstName,last_name:f.lastName,email:f.email,phone:f.phone,loan_officer_id:e,calculator_type:l,calculation_data:o})})).ok)throw new Error("Failed to submit lead");y(!0),setTimeout(()=>{t(),y(!1),c({firstName:"",lastName:"",email:"",phone:""})},2e3)}catch(e){_(e.message||"Failed to submit. Please try again.")}finally{m(!1)}},children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{className:"block mb-1.5 text-sm font-medium text-gray-700",children:[(0,a.__)("First Name","frs-partnership-portal")," ",(0,n.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,n.jsx)("input",{type:"text",required:!0,value:f.firstName,onChange:e=>c({...f,firstName:e.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-md text-sm outline-none focus:border-blue-600 focus:ring-2 focus:ring-blue-600/20"})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{className:"block mb-1.5 text-sm font-medium text-gray-700",children:[(0,a.__)("Last Name","frs-partnership-portal")," ",(0,n.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,n.jsx)("input",{type:"text",required:!0,value:f.lastName,onChange:e=>c({...f,lastName:e.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-md text-sm outline-none focus:border-blue-600 focus:ring-2 focus:ring-blue-600/20"})]})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsxs)("label",{className:"block mb-1.5 text-sm font-medium text-gray-700",children:[(0,a.__)("Email","frs-partnership-portal")," ",(0,n.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,n.jsx)("input",{type:"email",required:!0,value:f.email,onChange:e=>c({...f,email:e.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-md text-sm outline-none focus:border-blue-600 focus:ring-2 focus:ring-blue-600/20"})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsxs)("label",{className:"block mb-1.5 text-sm font-medium text-gray-700",children:[(0,a.__)("Phone","frs-partnership-portal")," ",(0,n.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,n.jsx)("input",{type:"tel",required:!0,value:f.phone,onChange:e=>c({...f,phone:e.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-md text-sm outline-none focus:border-blue-600 focus:ring-2 focus:ring-blue-600/20"})]}),b&&(0,n.jsx)("div",{style:{marginBottom:"16px",padding:"12px",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"6px",color:"#991b1b",fontSize:"14px"},children:b}),(0,n.jsx)("button",{type:"submit",disabled:h,style:{width:"100%",padding:"12px 24px",background:j,color:"#ffffff",border:"none",borderRadius:"6px",fontSize:"16px",fontWeight:"600",cursor:h?"not-allowed":"pointer",opacity:h?.7:1},children:h?(0,a.__)("Submitting...","frs-partnership-portal"):d})]})})]})})}function c({attributes:r}){const{defaultCalculatorType:t,showDisclaimer:s,disclaimerText:l,enableLeadCapture:o,primaryColor:c,secondaryColor:h}=r,[m,g]=(0,e.useState)(t||"conventional"),[y,b]=(0,e.useState)(!1),[_,j]=(0,e.useState)(null),v=[{id:"conventional",label:(0,a.__)("Conventional","frs-partnership-portal")},{id:"va",label:(0,a.__)("VA Loan","frs-partnership-portal")},{id:"fha",label:(0,a.__)("FHA Loan","frs-partnership-portal")},{id:"refinance",label:(0,a.__)("Refinance","frs-partnership-portal")},{id:"affordability",label:(0,a.__)("Affordability","frs-partnership-portal")}],C=e=>{j(e),o&&b(!0)};return(0,n.jsxs)("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"20px"},children:[(0,n.jsx)("div",{style:{background:"#ffffff",borderRadius:"8px",padding:"8px",marginBottom:"24px",display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"8px",border:"1px solid #e5e7eb"},children:v.map(e=>(0,n.jsx)("button",{onClick:()=>g(e.id),style:{padding:"12px 16px",background:m===e.id?`linear-gradient(135deg, ${c} 0%, ${h} 100%)`:"transparent",color:m===e.id?"#ffffff":"#374151",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},children:e.label},e.id))}),(0,n.jsxs)("div",{children:["conventional"===m&&(0,n.jsx)(i,{attributes:r,onCalculate:C}),"va"===m&&(0,n.jsx)(p,{attributes:r,onCalculate:C}),"fha"===m&&(0,n.jsx)(d,{attributes:r,onCalculate:C}),"refinance"===m&&(0,n.jsx)(x,{attributes:r,onCalculate:C}),"affordability"===m&&(0,n.jsx)(u,{attributes:r,onCalculate:C})]}),o&&(0,n.jsx)("div",{style:{marginTop:"32px",textAlign:"center"},children:(0,n.jsx)("button",{onClick:()=>b(!0),style:{padding:"16px 48px",background:`linear-gradient(135deg, ${c} 0%, ${h} 100%)`,color:"#ffffff",border:"none",borderRadius:"8px",fontSize:"18px",fontWeight:"700",cursor:"pointer",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},children:r.ctaButtonText})}),s&&l&&(0,n.jsx)("div",{style:{marginTop:"32px",padding:"16px",background:"#f9fafb",borderRadius:"8px",fontSize:"12px",color:"#6b7280",textAlign:"center",border:"1px solid #e5e7eb"},children:l}),o&&(0,n.jsx)(f,{isOpen:y,onClose:()=>b(!1),attributes:r,calculationType:m,calculationResults:_})]})}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".frs-mortgage-calculator-block").forEach(a=>{const r=JSON.parse(a.dataset.attributes||"{}");(0,e.render)((0,n.jsx)(c,{attributes:r}),a)})})})();