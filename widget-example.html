<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FRS Mortgage Calculator Widget - Demo</title>
  <link rel="stylesheet" href="./assets/widget/dist/frs-mortgage-calculator.css">
  <style>
    body {
      font-family: system-ui, -apple-system, sans-serif;
      margin: 0;
      padding: 20px;
      background: #f3f4f6;
    }
    .container {
      max-width: 1400px;
      margin: 0 auto;
    }
    header {
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      margin-bottom: 30px;
    }
    h1 {
      margin: 0 0 10px 0;
      color: #111827;
    }
    p {
      margin: 0;
      color: #6b7280;
    }
    .config-panel {
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      margin-bottom: 30px;
    }
    .config-panel h2 {
      margin: 0 0 15px 0;
      font-size: 18px;
      color: #111827;
    }
    .config-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
      margin-bottom: 15px;
    }
    .config-field {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }
    .config-field label {
      font-size: 14px;
      font-weight: 500;
      color: #374151;
    }
    .config-field input {
      padding: 8px 12px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      font-size: 14px;
    }
    .config-field input:focus {
      outline: none;
      border-color: #3b82f6;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }
    button {
      background: #3b82f6;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
    }
    button:hover {
      background: #2563eb;
    }
    .widget-container {
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    code {
      background: #f3f4f6;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 13px;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>üè† FRS Mortgage Calculator Widget</h1>
      <p>Standalone embeddable widget with lead capture and webhook integration</p>
    </header>

    <div class="config-panel">
      <h2>‚öôÔ∏è Widget Configuration</h2>
      <div class="config-grid">
        <div class="config-field">
          <label for="webhookUrl">Webhook URL</label>
          <input type="text" id="webhookUrl" placeholder="https://hooks.zapier.com/...">
        </div>
        <div class="config-field">
          <label for="emailApiUrl">Email API URL</label>
          <input type="text" id="emailApiUrl" value="/wp-json/frs-lrg/v1/send-calculation-email">
        </div>
        <div class="config-field">
          <label for="brandColor">Brand Color</label>
          <input type="color" id="brandColor" value="#3b82f6">
        </div>
        <div class="config-field">
          <label for="logoUrl">Logo URL (optional)</label>
          <input type="text" id="logoUrl" placeholder="https://...">
        </div>
        <div class="config-field">
          <label for="loanOfficerName">Loan Officer Name</label>
          <input type="text" id="loanOfficerName" placeholder="John Doe">
        </div>
        <div class="config-field">
          <label for="loanOfficerEmail">Loan Officer Email</label>
          <input type="email" id="loanOfficerEmail" placeholder="john@example.com">
        </div>
        <div class="config-field">
          <label for="loanOfficerPhone">Loan Officer Phone</label>
          <input type="tel" id="loanOfficerPhone" placeholder="(555) 123-4567">
        </div>
      </div>
      <button onclick="reloadWidget()">üîÑ Apply Configuration</button>
    </div>

    <div class="widget-container">
      <div id="mortgage-calculator"></div>
    </div>

    <div class="config-panel" style="margin-top: 30px;">
      <h2>üìã Embed Code</h2>
      <p style="margin-bottom: 15px; color: #6b7280; font-size: 14px;">
        Copy this code to embed the widget on any website:
      </p>
      <pre id="embedCode" style="background: #f3f4f6; padding: 15px; border-radius: 8px; overflow-x: auto; font-size: 13px;"></pre>
    </div>
  </div>

  <script src="./assets/widget/dist/frs-mortgage-calculator.js"></script>
  <script>
    function getConfig() {
      return {
        webhookUrl: document.getElementById('webhookUrl').value || undefined,
        emailApiUrl: document.getElementById('emailApiUrl').value || undefined,
        brandColor: document.getElementById('brandColor').value,
        logoUrl: document.getElementById('logoUrl').value || undefined,
        loanOfficerName: document.getElementById('loanOfficerName').value || undefined,
        loanOfficerEmail: document.getElementById('loanOfficerEmail').value || undefined,
        loanOfficerPhone: document.getElementById('loanOfficerPhone').value || undefined,
        showLeadForm: true,
        emailEnabled: true
      };
    }

    function updateEmbedCode() {
      const config = getConfig();
      const code = `<!-- FRS Mortgage Calculator Widget -->
<link rel="stylesheet" href="https://your-site.com/assets/widget/dist/frs-mortgage-calculator.css">

<div id="mortgage-calculator"
     ${config.webhookUrl ? `data-webhook-url="${config.webhookUrl}"` : ''}
     ${config.emailApiUrl ? `data-email-api-url="${config.emailApiUrl}"` : ''}
     data-brand-color="${config.brandColor}"
     ${config.logoUrl ? `data-logo-url="${config.logoUrl}"` : ''}
     ${config.loanOfficerName ? `data-loan-officer-name="${config.loanOfficerName}"` : ''}
     ${config.loanOfficerEmail ? `data-loan-officer-email="${config.loanOfficerEmail}"` : ''}
     ${config.loanOfficerPhone ? `data-loan-officer-phone="${config.loanOfficerPhone}"` : ''}
     data-frs-mortgage-calculator
></div>

<script src="https://your-site.com/assets/widget/dist/frs-mortgage-calculator.js"><\/script>`;

      document.getElementById('embedCode').textContent = code;
    }

    function reloadWidget() {
      const config = getConfig();
      window.FRSMortgageCalculator.destroy('mortgage-calculator');
      window.FRSMortgageCalculator.init('mortgage-calculator', config);
      updateEmbedCode();
    }

    // Initial load
    window.addEventListener('load', () => {
      reloadWidget();
    });

    // Update embed code on input change
    document.querySelectorAll('input').forEach(input => {
      input.addEventListener('input', updateEmbedCode);
    });
  </script>
</body>
</html>
